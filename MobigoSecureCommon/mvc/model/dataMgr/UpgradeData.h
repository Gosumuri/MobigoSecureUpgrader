#pragma once

////////////////////////////////////////////////////////////////////////////////
// include
////////////////////////////////////////////////////////////////////////////////

#include "UpgradeItem.h"

////////////////////////////////////////////////////////////////////////////////
// define
////////////////////////////////////////////////////////////////////////////////


////////////////////////////////////////////////////////////////////////////////
// macro
////////////////////////////////////////////////////////////////////////////////


////////////////////////////////////////////////////////////////////////////////
// class declare
////////////////////////////////////////////////////////////////////////////////

class AFX_EXT_CLASS CUpgradeData : public CUpgradeItem
{
public:
	CUpgradeData();   // protected constructor used by dynamic creation
	virtual ~CUpgradeData();

public:
	void Init();
	void Exit();

////////////////////////////////////////////////////////////////////////////////
// member data
////////////////////////////////////////////////////////////////////////////////

private:
    CString             m_strMakeTime; 
    CMapStringToString* m_pMapUrl2Path;
////////////////////////////////////////////////////////////////////////////////
// member function
////////////////////////////////////////////////////////////////////////////////

// get/set
public:
    CString             GetMakeTime()                                    { return m_strMakeTime;            };
    void                SetMakeTime( CString strMakeTime )               { m_strMakeTime = strMakeTime;     };
// public
public :
    int                 CalcTotalSize();
    int                 CalcDownloadSize();
    void                FillUrl2PathMap(        CMapStringToString* pMapUrl2Path );
    void                FillZip2DirMap(         CMapStringToString* pMapZip2Dir  );
    void                FillSystemApk2DirMap(   CMapStringToString* pMapApk2Dir, CString strSystemApkItemID );
    void                FillSystemApk2IDMap(    CMapStringToString* pMapApk2ID,  CString strSystemApkItemID );
    void                FillID2PtrMap(          CMapStringToPtr*    pMapID2Ptr   );

// dump/toJson
public:
    void                Dump( CString strTab );
    CString             ToJson( CString strTab );
};